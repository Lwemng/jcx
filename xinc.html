<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<title>出校</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport"
			content="width=device-width, initial-scala=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />

<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
<style>
 .upload{
            width: 80px;
            height: 20px;
            background-color: rgba(135, 206, 235,0.2);
            border: 1px dashed black;
            border-radius: 5px;
            position: relative;
 
        }
        .upload:hover{
            background-color: rgba(135, 206, 235,1);
        }
        .upload::before{
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            content: '上传图片';
            font-size: 13px;
            text-align: center;
            font-family: 'fangsong';
            line-height: 20px;
            user-select: none;
        }
        #file{
            width: 100%;
            height: 100%;
            opacity: 0;
        }</style>
	</head>
	<body style='background-color1:#DFE8F6;;height:100%;'>
		<center id="app">
			<div class="app1">
				<span>输入“姓名-学号”后点空白区域</span>
				
			<input  type="text" v-model="name" placeholder="姓名-学号">
			<div class="upload">           
           <input class="app2" type="file" id="file" multiple @change="upload" >
         </div>
			</div>
			<table>
				<tr>
					<td align="center">
						<div id='jinchuleixingstr' style='font-size:35px'>出校</div>
					</td>
				</tr>
				<tr>
					<td align="center" style='border-bottom: 1px solid #d0d0d5;'>



						<div class="oval" v-for="(item,index) in list" :key="index" style='border-radius: 25px;width:130px' test="background11: url(
) no-repeat scroll 0 transparent;">
							<img :src="item" style='width:130px;border-style1: dashed;border-radius1: 15px;border-color1: #FF7F50'>
						</div>
						{{name}}


					</td>
				</tr>
				<tr>

					<td align="center"> <br />
						<div id='mymessage' style='font-size:35px'>
							学生：白名单验证通过，该申请离校扫码1次，离校码只能使用一次，请不要重复打开
						</div>
					</td>


				</tr>

				<tr>
					<td align="center">
						<div class='shijiandiv'
							style='font-size:35px;align-items: center;justify-content: center;display: flex;text-align: center; color: red;width:220px;background-color1: #E9F1F6;height1:50px;border-radius: 10px'>
						</div>
					</td>
				</tr>
				<tr>
					<td align="center"><img src="http://wx.ccdgut.edu.cn:80/ccdgutwx//images/right2.png" id='myimg' height='100px' style='margin-top:10px'></td>
				</tr>
			</table>
		</center>

	</body>
</html>

<script type="text/javascript" src="http://wx.ccdgut.edu.cn:80/ccdgutwx//js/jquery-1.7.2.min.js"></script>
<script>
Vue.config.productionTip = false
	    new Vue({
	        el:'#app',
	        data:{
	            name:'',
				list:[]
	        },
			methods:{
				upload(e){
				       for(let item of e.target.files){
				             if (!/image\/\w+/.test(item.type)) {
				               alert("只能选择图片");
				               return;
				             } 
				           var _this = this;
				           let reader = new FileReader();
				           reader.readAsDataURL(item);
				           reader.addEventListener('load',function(){
				              _this.list.push(this.result)
				           })
				          }
					}
			}
	    });
		$(document).mouseup(function (e) {
		    var _con = $(".app1"); // 设置目标区域
		    if(!_con.is(e.target) && _con.has(e.target).length === 0){
		        $(".app1").hide();
		    }
		});
		
	Date.prototype.format = function(format) {
		var o = {
			"M+": this.getMonth() + 1, //month
			"d+": this.getDate(), //day
			"h+": this.getHours(), //hour
			"m+": this.getMinutes(), //minute
			"s+": this.getSeconds(), //second
			"q+": Math.floor((this.getMonth() + 3) / 3), //quarter
			"S": this.getMilliseconds() //millisecond
		}
		if (/(y+)/.test(format)) format = format.replace(RegExp.$1,
			(this.getFullYear() + "").substr(4 - RegExp.$1.length));
		for (var k in o)
			if (new RegExp("(" + k + ")").test(format))
				format = format.replace(RegExp.$1,
					RegExp.$1.length == 1 ? o[k] :
					("00" + o[k]).substr(("" + o[k]).length));
		return format;
	}

	// $.getJSON("https://wx.ccdgut.edu.cn/ccdgutwx/jinchuxiao/dy!newjinchu.action?xuehao=&jinchuleixing=1",
	// 	function(data) {
	// 		console.log(data)
	// 		// data=eval( "("+data+")"  );

	// 		if (data && data.id && data.message.indexOf("不通过") == -1) {

	// 			$("#myimg").attr("src", "http://wx.ccdgut.edu.cn:80/ccdgutwx//images/right2.png")

	// 		} else {

	// 			$("#myimg").attr("src", "http://wx.ccdgut.edu.cn:80/ccdgutwx//images/right2.png")

	// 		}

	// 		data.message = data.message.replace("稽查", "核验")
	// 		data.message = data.message.replace("", "")
	// 		data.message = data.message.replace("", "")

	// 		$("#jinchuleixingstr").html("进校");

	// 		$("#mymessage").html("" + data.message);

	// 	})







	$(function() {


		$(".bar-body").css("left", ($(window).width() - $(".bar-body").width()) / 2 + "px");

		// setTimeout("shuaxin()", 1000 * 55);

		shijiandiv();



		// $(".yuekangmadiv").height( $(window).height()/5 );

	});

	function shijiandiv() {
		//  $(".shijiandiv").html(  new Date().format('hh:mm:ss S') );
		$(".shijiandiv").html(new Date().format('hh:mm:ss.S'));

		setTimeout("shijiandiv()", 100);
	}
</script>
